<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>कृषिMitr - Home</title>

  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="./assets/css/style.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <style>
    /* --- 1. HEADER LAYOUT --- */
    .header .container {
      display: flex !important;
      align-items: center !important;
      justify-content: space-between !important;
      padding-block: 15px;
    }

    .navbar-list {
      display: flex;
      align-items: center;
      gap: 30px;
      margin: 0;
      padding: 0;
    }

    .navbar-link {
      font-weight: 600;
      color: var(--davys-gray);
      padding: 10px 0;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* --- DROPDOWN MENU STYLES --- */
    .dropdown-wrapper { position: relative; }
    
    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: white;
      min-width: 220px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      padding: 10px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1100;
      border: 1px solid #f0f0f0;
    }
    
    .dropdown-wrapper:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .dropdown-menu::before {
      content: '';
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%) rotate(45deg);
      width: 12px;
      height: 12px;
      background: white;
      border-top: 1px solid #f0f0f0;
      border-left: 1px solid #f0f0f0;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      color: #444;
      font-weight: 600;
      text-decoration: none;
      border-radius: 8px;
      transition: 0.2s;
      font-size: 0.95rem;
    }
    
    .dropdown-item:hover {
      background: #e8f5e9;
      color: #1e7e34;
    }

    /* --- END DROPDOWN --- */

    .header-right-group {
      display: flex !important;
      align-items: center !important;
      gap: 20px;
      margin-left: auto;
    }

    .lang-box {
      display: flex;
      align-items: center;
      background-color: #ffffff;
      border: 1px solid #e0e0e0;
      border-radius: 50px;
      padding: 0 15px;
      min-width: 110px;
      height: 45px;
      overflow: hidden;
    }
    .lang-box ion-icon { font-size: 1.5rem; color: #333; margin-right: 8px; }
    #language-select { border: none; outline: none; background: transparent; font-family: 'Montserrat'; font-weight: 600; color: #333; font-size: 1rem; cursor: pointer; width: 100%; }

    .header .btn {
      margin-inline-start: 0 !important; 
      padding: 0 40px !important;
      height: 45px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 1.1rem !important;
      font-weight: 700 !important;
      min-width: 140px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .nav-profile-btn {
      width: 45px; height: 45px; background-color: #1e7e34; color: white;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 1.5rem; text-decoration: none; transition: 0.3s;
    }
    .nav-profile-btn:hover { background-color: #155724; }

    .goog-te-banner-frame.skiptranslate { display: none !important; } 
    body { top: 0px !important; } 
    .goog-te-gadget { font-size: 0 !important; }

    /* --- NEWS CARD STYLES --- */
    .course-card { height: 100%; display: flex; flex-direction: column; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; border: 1px solid #eee; }
    .course-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
    .card-banner { height: 200px; overflow: hidden; }
    .img-cover { width: 100%; height: 100%; object-fit: cover; }
    .card-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }
    .card-title { font-size: 1.4rem; font-weight: 700; color: #333; margin-bottom: 15px; line-height: 1.4; display: -webkit-box; -webkit-lineclamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
    .btn-read { margin-top: auto; align-self: flex-start; background: #e8f5e9; color: #1e7e34; padding: 10px 20px; border-radius: 30px; font-weight: 600; font-size: 0.9rem; transition: 0.3s; display: inline-flex; align-items: center; gap: 8px; text-decoration: none; width: fit-content; }
    .btn-read ion-icon { font-size: 1.2rem !important; }
    .btn-read:hover { background: #1e7e34; color: white; }

    /* Mobile */
    @media (max-width: 992px) {
      .navbar { display: none; } 
      .header-right-group { margin-right: 60px; gap: 10px; }
      .lang-box { padding: 0 8px; min-width: auto; height: 40px !important; }
      .header .btn { padding: 0 15px !important; height: 40px !important; font-size: 0.9rem !important; min-width: auto; }
      
      /* Mobile Dropdown Logic */
      .dropdown-menu { 
          position: static; 
          transform: none; 
          box-shadow: none; 
          border: none; 
          padding-left: 20px; 
          background: #f9f9f9; 
          display: none; 
          opacity: 1; 
          visibility: visible;
      }
      .dropdown-wrapper:hover .dropdown-menu { display: block; }
    }
  </style>
</head>

<body id="top">

  <header class="header" data-header>
    <div class="container">

      <a href="index.html" class="logo">
        कृषिMitr<span class="span">.</span>
      </a>

      <nav class="navbar" data-navbar>
        <button class="nav-toggle-btn" aria-label="close menu" data-nav-toggler>
          <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
        </button>

        <ul class="navbar-list">
          <li class="navbar-item"><a href="index.html" class="navbar-link active" data-nav-link data-i18n="nav_home">Home</a></li>
          <li class="navbar-item"><a href="news.html" class="navbar-link" data-nav-link data-i18n="nav_news">News</a></li>
          
          <li class="navbar-item dropdown-wrapper">
            <a href="#" class="navbar-link" data-i18n="nav_store">
               Marketplace <ion-icon name="chevron-down-outline" style="font-size: 1rem;"></ion-icon>
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a href="fertilizer-store.html" class="dropdown-item">
                        <ion-icon name="storefront-outline"></ion-icon> Find Stores
                    </a>
                </li>
                <li>
                    <a href="mandi-prices.html" class="dropdown-item">
                        <ion-icon name="bar-chart-outline"></ion-icon> Mandi Prices
                    </a>
                </li>
            </ul>
          </li>

          <li class="navbar-item"><a href="crop-guide.html" class="navbar-link" data-nav-link data-i18n="nav_guide">Crop Guide</a></li>
          <li class="navbar-item"><a href="weather.html" class="navbar-link" data-nav-link data-i18n="nav_weather">Weather</a></li>
          <li class="navbar-item"><a href="contact.html" class="navbar-link" data-nav-link data-i18n="nav_contact">Contact</a></li>
        </ul>
      </nav>

      <div class="header-right-group">
        
        <div class="lang-box">
          <ion-icon name="language-outline"></ion-icon>
          <select id="language-select" onchange="changeLanguage(this.value)">
            <option value="en">English</option>
            <option value="hi">हिंदी</option>
          </select>
        </div>

        <div id="auth-container">
            <a href="signup.html" class="btn btn-primary" id="auth-button" data-i18n="btn_signup">Sign Up</a>
        </div>

      </div>

      <button class="nav-toggle-btn" aria-label="open manu" data-nav-toggler>
        <ion-icon name="menu-outline" aria-hidden="true"></ion-icon>
      </button>

      <div class="overlay" data-nav-toggler data-overlay></div>

    </div>
  </header>

  <main>
    <article>

      <section class="section hero" aria-label="hero" id="home" data-section
        style="background-image: url('./assets/images/photo-1520052203542-d3095f1b6cf0.jpeg')">
        <div class="container">
          <p class="hero-subtitle" data-i18n="hero_sub">Smart Farming, Simplified.</p>
          <h1 class="h1 hero-title" style="color: white;" data-i18n="hero_title">कृषिMitra: Your Farm's Best Friend.</h1>
          <p class="hero-text" data-i18n="hero_text">
          Get seasonal crop advice, check live mandi prices, and stay updated with the latest agri-news—all in one place.
          </p>
          <a href="#about" class="btn btn-secondary" data-i18n="btn_learn">Learn More</a>
          
          <div class="social-wrapper">
            <p class="social-title" data-i18n="connect_us">Connect with us:</p>
            <ul class="social-list">
              <li><a href="#" class="social-link"><ion-icon name="logo-facebook"></ion-icon></a></li>
              <li><a href="#" class="social-link"><ion-icon name="logo-twitter"></ion-icon></a></li>
              <li><a href="#" class="social-link"><ion-icon name="logo-linkedin"></ion-icon></a></li>
            </ul>
          </div>
        </div>
      </section>

      <section class="section service" aria-label="service" id="service" data-section>
        <div class="container">
          <ul class="grid-list">
            <li>
              <div class="service-card">
                <div class="card-icon"><img src="./assets/images/globeeee-removebg-preview.png" width="10px" height="10px" loading="lazy" alt="Globe"></div>
                <h3 class="h3"><a href="news.html" class="card-title" data-i18n="feat_news">News</a></h3>
                <p class="card-text" data-i18n="feat_news_desc">Stay updated with the latest developments, research, and trends in modern agriculture</p>
                <a href="news.html" class="btn btn-secondary"><ion-icon name="arrow-forward"></ion-icon></a>
              </div>
            </li>
            <li>
              <div class="service-card active">
                <div class="card-icon"><img src="./assets/images/service-2.svg" width="60" height="60" loading="lazy" alt="Basic Course"></div>
                <h3 class="h3"><a href="mandi-prices.html" class="card-title" data-i18n="feat_store">Mandi Prices</a></h3>
                <p class="card-text" data-i18n="feat_store_desc">Check real-time market rates and find authorized fertilizer stores near you.</p>
                <a href="mandi-prices.html" class="btn btn-secondary"><ion-icon name="arrow-forward"></ion-icon></a>
              </div>
            </li>
            <li>
              <div class="service-card">
                <div class="card-icon"><img src="./assets/images/leaf-sticker-tropical-rainforest-wall-decal-clip-art-tropical-leaf-removebg-preview.png" width="60" height="60" loading="lazy" alt="Men’s Course"></div>
                <h3 class="h3"><a href="crop-guide.html" class="card-title" data-i18n="feat_crop">Crop Guide</a></h3>
                <p class="card-text" data-i18n="feat_crop_desc">Data-driven recommendations for optimal crop selection based on season, climate, and market conditions</p>
                <a href="crop-guide.html" class="btn btn-secondary"><ion-icon name="arrow-forward"></ion-icon></a>
              </div>
            </li>
          </ul>
        </div>
      </section>

      <section class="section about" aria-label="about" id="about" data-section>
        <div class="container">
          <div class="about-banner img-holder" style="--width: 470; --height: 580;">
            <img src="./assets/images/shutterstock_1116673256 (1).jpg" width="470" height="580" loading="lazy" alt="about banner" class="img-cover">
            <a href="#about" class="btn btn-secondary" data-i18n="btn_about">About Us</a>
          </div>
          <div class="about-content">
            <p class="section-subtitle" data-i18n="about_sub">About Krishimitr: Your Partner in Growth</p>
            <h2 class="h2 section-title" data-i18n="about_title">Empowering farmers with the knowledge and tools.</h2>
            <p class="section-text" data-i18n="about_text">
              At Krishimitr, our name is our mission: to be the farmer's best friend (Krishi + Mitr). We are a dedicated agri-tech platform built to bring the power of technology right to your fingertips.
            </p>
          </div>
        </div>
      </section>

      <section class="section course" aria-label="course" id="course" data-section>
        <div class="container">
          <div class="title-wrapper">
            <p class="section-subtitle" data-i18n="news_sub">Latest News</p>
            <h2 class="h2 section-title" data-i18n="news_title">Agricultural News & Insights</h2>
          </div>
          
          <ul class="grid-list" id="home-news-grid">
             <p style="text-align: center; width: 100%; color: #666;">
               <ion-icon name="sync-outline" class="spin"></ion-icon> Loading latest headlines...
             </p>
          </ul>

          <div style="text-align: center; margin-top: 40px;">
            <a href="news.html" class="btn btn-secondary" data-i18n="btn_view_news">View All News</a>
          </div>
        </div>
      </section>

    </article>
  </main>

  <footer class="footer" id="footer">
    <div class="footer-top section" data-section>
      <div class="container">
        <div class="footer-list">
          <p class="footer-list-title" data-i18n="footer_sub">Subscribe Newsletter</p>
          <p class="footer-list-text" data-i18n="footer_text">Get the latest agri-news and product offers from Krishimitr.</p>
          <form action="" class="footer-form">
            <input type="email" name="email_address" placeholder="Enter email" required class="email-field">
            <button type="submit" class="btn btn-secondary" data-i18n="btn_sub">Subscribe</button>
          </form>
        </div>
        <ul class="footer-list">
          <li><p class="footer-list-title" data-i18n="footer_links">Quick Links</p></li>
          <li><a href="index.html" class="footer-link" data-i18n="nav_home">Home</a></li>
          <li><a href="news.html" class="footer-link" data-i18n="nav_news">News</a></li>
          <li><a href="fertilizer-store.html" class="footer-link" data-i18n="nav_store">Store</a></li>
          <li><a href="crop-guide.html" class="footer-link" data-i18n="nav_guide">Crop Guide</a></li>
          <li><a href="weather.html" class="footer-link" data-i18n="nav_weather">Weather</a></li>
          <li><a href="contact.html" class="footer-link" data-i18n="nav_contact">Contact</a></li>
        </ul>
        <ul class="footer-list">
          <li><p class="footer-list-title" data-i18n="footer_help">Help Links</p></li>
          <li><a href="#" class="footer-link">Privacy Policy</a></li>
          <li><a href="#" class="footer-link">Terms & Conditions</a></li>
          <li><a href="#" class="footer-link">Customer Support</a></li>
          <li><a href="#" class="footer-link">About Us</a></li>
          <li><a href="login.html" class="footer-link">Login / Register</a></li>
        </ul>
        <ul class="footer-list">
          <li><p class="footer-list-title" data-i18n="footer_loc">Location</p></li>
          <li><address class="address">Jaipur, Rajasthan</address></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="container"><p class="copyright">&copy; 2025 Krishimitr.</p></div>
    </div>
  </footer>

  <a href="#top" class="back-top-btn" aria-label="back to top" data-back-top-btn><ion-icon name="chevron-up"></ion-icon></a>

  <script src="./assets/js/script.js" defer></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script>
    // 1. API KEY (Using the key from your script)
    const API_KEY = "pub_aa53d72288e74dcf9b2d3e7183148e1b"; 
    
    // 2. BACKUP DATA
    const mockNews = [
        {
            title: "Government hikes MSP for Rabi crops to boost farmer income",
            image_url: "./assets/images/courses-4.jpg",
            link: "#",
            source_id: "Times of India",
            pubDate: "2025-10-15"
        },
        {
            title: "New AI tool detects crop diseases in real-time",
            image_url: "./assets/images/courses-4.jpg",
            link: "#",
            source_id: "Tech Crunch",
            pubDate: "2025-10-14"
        },
        {
            title: "Organic farming spreads across 50,000 new acres",
            image_url: "./assets/images/courses-4.jpg",
            link: "#",
            source_id: "The Hindu",
            pubDate: "2025-10-12"
        }
    ];

    async function fetchHomeNews() {
        const container = document.getElementById('home-news-grid');
        // Fetch 3 items
        const url = `https://newsdata.io/api/1/news?apikey=${API_KEY}&q=agriculture&country=in&language=en`;

        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error("API Error");
            const data = await response.json();

            if (!data.results || data.results.length === 0) throw new Error("No articles");

            // Limit to first 3 articles for homepage
            renderHomeNews(data.results.slice(0, 3));

        } catch (error) {
            console.warn("Home News API failed, using backup:", error);
            renderHomeNews(mockNews);
        }
    }

    function renderHomeNews(articles) {
        const container = document.getElementById('home-news-grid');
        container.innerHTML = ""; 

        articles.forEach(article => {
            const image = article.image_url || './assets/images/courses-4.jpg';
            const url = article.link;
            const source = article.source_id;
            const date = article.pubDate ? article.pubDate.split(" ")[0] : "Today";

            const cardHTML = `
            <li>
              <div class="course-card">
                <figure class="card-banner">
                  <img src="${image}" loading="lazy" alt="News" class="img-cover" onerror="this.src='./assets/images/courses-4.jpg'">
                </figure>
                <div class="card-content">
                  <p class="card-author" style="margin-bottom:10px; font-size:0.9rem; color:#666;">
                    <span class="span" style="color:#1e7e34; font-weight:bold; text-transform:capitalize;">${source}</span>
                    <span style="float:right;">${date}</span>
                  </p>
                  <h3 class="h3">
                    <a href="${url}" target="_blank" class="card-title">${article.title}</a>
                  </h3>
                  <a href="${url}" target="_blank" class="btn-read">
                    Read Article <ion-icon name="arrow-forward-outline"></ion-icon>
                  </a>
                </div>
              </div>
            </li>
            `;
            container.innerHTML += cardHTML;
        });
    }

    document.addEventListener('DOMContentLoaded', fetchHomeNews);
  </script>

  <script>
    const translations = {
      en: {
        nav_home: "Home", nav_news: "News", nav_store: "Marketplace", nav_guide: "Crop Guide", nav_weather: "Weather", nav_contact: "Contact",
        btn_signup: "Sign Up", btn_login: "Login", btn_logout: "Logout",
        hero_sub: "Smart Farming, Simplified.", hero_title: "कृषिMitra: Your Farm's Best Friend.", hero_text: "Get seasonal crop advice, check live mandi prices, and stay updated with the latest agri-news—all in one place.",
        btn_learn: "Learn More", connect_us: "Connect with us:",
        feat_news: "News", feat_news_desc: "Stay updated with the latest developments, research, and trends in modern agriculture",
        feat_store: "Mandi Prices", feat_store_desc: "Check real-time market rates and find authorized fertilizer stores near you.",
        feat_crop: "Crop Guide", feat_crop_desc: "Data-driven recommendations for optimal crop selection based on season, climate, and market conditions",
        btn_about: "About Us", about_sub: "About Krishimitr: Your Partner in Growth", about_title: "Empowering farmers with the knowledge and tools.", about_text: "At Krishimitr, our name is our mission: to be the farmer's best friend (Krishi + Mitr). We are a dedicated agri-tech platform built to bring the power of technology right to your fingertips.",
        news_sub: "Latest News", news_title: "Agricultural News & Insights", btn_view_news: "View All News",
        footer_sub: "Subscribe Newsletter", footer_text: "Get the latest agri-news and product offers from Krishimitr.", btn_sub: "Subscribe",
        footer_links: "Quick Links", footer_help: "Help Links", footer_loc: "Location"
      },
      hi: {
        nav_home: "होम", nav_news: "समाचार", nav_store: "बाजार", nav_guide: "फसल गाइड", nav_weather: "मौसम", nav_contact: "संपर्क",
        btn_signup: "साइन अप", btn_login: "लॉग इन", btn_logout: "लॉग आउट",
        hero_sub: "स्मार्ट खेती, सरल बनाई गई।", hero_title: "कृषिMitra: आपके खेत का सबसे अच्छा दोस्त।", hero_text: "मौसमी फसल सलाह प्राप्त करें, मंडी के भाव देखें और नवीनतम कृषि समाचारों से अपडेट रहें - सब एक ही स्थान पर।",
        btn_learn: "और जानें", connect_us: "हमसे जुड़ें:",
        feat_news: "समाचार", feat_news_desc: "आधुनिक कृषि में नवीनतम विकास, अनुसंधान और रुझानों के साथ अपडेट रहें।",
        feat_store: "मंडी भाव", feat_store_desc: "वास्तविक समय के बाजार भाव देखें और अपने निकटतम अधिकृत उर्वरक स्टोर खोजें।",
        feat_crop: "फसल गाइड", feat_crop_desc: "मौसम, जलवायु और बाजार की स्थितियों के आधार पर इष्टतम फसल चयन के लिए सिफारिशें।",
        btn_about: "हमारे बारे में", about_sub: "कृषि मित्र के बारे में: विकास में आपका भागीदार", about_title: "किसानों को ज्ञान और उपकरणों के साथ सशक्त बनाना।", about_text: "कृषि मित्र में, हमारा नाम ही हमारा मिशन है: किसान का सबसे अच्छा दोस्त बनना। हम एक समर्पित एग्री-टेक प्लेटफॉर्म हैं जो तकनीक की शक्ति को आपकी उंगलियों तक लाने के लिए बनाया गया है।",
        news_sub: "ताज़ा खबर", news_title: "कृषि समाचार और अंतर्दृष्टि", btn_view_news: "सभी समाचार देखें",
        footer_sub: "न्यूज़लेटर सदस्यता लें", footer_text: "कृषि मित्र से नवीनतम कृषि समाचार और उत्पाद ऑफ़र प्राप्त करें।", btn_sub: "सदस्यता लें",
        footer_links: "त्वरित लिंक", footer_help: "सहायता लिंक", footer_loc: "स्थान"
      }
    };

    function changeLanguage(lang) {
      const elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { firebaseConfig } from "./assets/js/config.js"; 
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const authContainer = document.getElementById('auth-container');

    if (authContainer) {
      onAuthStateChanged(auth, (user) => {
        const currentLang = document.getElementById('language-select').value;
        const dict = translations[currentLang];

        if (user) {
          // User Logged In: Show Profile Icon ONLY
          authContainer.innerHTML = `
                <a href="dashboard.html" class="nav-profile-btn" title="Go to Dashboard">
                    <ion-icon name="person-circle-outline"></ion-icon>
                </a>
          `;
        } else {
          // User Logged Out: Show Sign Up Button
          authContainer.innerHTML = `
             <a href="signup.html" class="btn btn-primary" id="auth-button">${dict.btn_signup}</a>
          `;
        }
      });
    }
  </script>

</body>
</html>