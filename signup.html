<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Sign Up - कृषिMitr</title>

  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="./assets/css/style.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <style>
    /* --- HEADER STYLES --- */
    .header .container { display: flex !important; align-items: center !important; justify-content: space-between !important; padding-block: 15px; }
    .header-right-group { display: flex !important; align-items: center !important; gap: 20px; margin-left: auto; }
    
    .navbar-list { display: flex; align-items: center; gap: 30px; margin: 0; padding: 0; list-style: none; }
    .navbar-link { font-weight: 600; color: var(--davys-gray); padding: 10px 0; text-decoration: none; transition: 0.3s; display: flex; align-items: center; gap: 5px; }
    
    /* DROPDOWN MENU */
    .dropdown-wrapper { position: relative; }
    .dropdown-menu {
      position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(20px);
      background: white; min-width: 220px; border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15); padding: 10px;
      opacity: 0; visibility: hidden; transition: all 0.3s ease;
      z-index: 1100; border: 1px solid #f0f0f0;
    }
    .dropdown-wrapper:hover .dropdown-menu { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
    .dropdown-menu::before {
      content: ''; position: absolute; top: -6px; left: 50%;
      transform: translateX(-50%) rotate(45deg); width: 12px; height: 12px;
      background: white; border-top: 1px solid #f0f0f0; border-left: 1px solid #f0f0f0;
    }
    .dropdown-item {
      display: flex; align-items: center; gap: 12px; padding: 12px 15px;
      color: #444; font-weight: 600; text-decoration: none;
      border-radius: 8px; transition: 0.2s; font-size: 0.95rem;
    }
    .dropdown-item:hover { background: #e8f5e9; color: #1e7e34; }

    /* Lang Box & Buttons */
    .lang-box { display: flex; align-items: center; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 50px; padding: 0 15px; min-width: 110px; height: 45px; overflow: hidden; }
    .lang-box ion-icon { font-size: 1.5rem; color: #333; margin-right: 8px; }
    #language-select { border: none; outline: none; background: transparent; font-family: 'Montserrat'; font-weight: 600; color: #333; font-size: 1rem; cursor: pointer; width: 100%; }
    
    .header .btn { margin-inline-start: 0 !important; padding: 0 40px !important; height: 45px !important; display: flex !important; align-items: center !important; justify-content: center !important; font-size: 1rem !important; font-weight: 700 !important; min-width: 140px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    
    .goog-te-banner-frame.skiptranslate { display: none !important; } body { top: 0px !important; } .goog-te-gadget { font-size: 0 !important; }

    /* SIGNUP SPECIFIC */
    .login-section { padding-top: 150px; padding-bottom: 100px; background-color: var(--cultured); min-height: 100vh; }
    .login-card { max-width: 500px; margin: 0 auto; background-color: var(--white); border-radius: var(--radius-10); box-shadow: var(--shadow-1); padding: 40px; }
    .login-card .h2 { text-align: center; font-family: var(--ff-playfair); font-size: var(--fs-2); color: var(--black-chocolate); margin-bottom: 10px; }
    .login-card .form-subtitle { text-align: center; font-size: var(--fs-5); color: var(--davys-gray); margin-bottom: 30px; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-weight: var(--fw-600); font-size: var(--fs-6); color: var(--black-chocolate); margin-bottom: 8px; }
    .form-group input, .form-group select { width: 100%; padding: 12px 15px; font-size: var(--fs-5); border: 1px solid var(--light-gray); border-radius: var(--radius-10); transition: var(--transition-1); color: var(--davys-gray); font-family: 'Montserrat', sans-serif; }
    .form-group input:focus, .form-group select:focus { border-color: var(--blue-green-color-wheel); box-shadow: 0 0 0 3px var(--blue-green-color-wheel_10); }
    .form-divider { margin-top: 30px; margin-bottom: 25px; border: 0; border-top: 1px solid var(--light-gray); }
    .login-link { text-align: center; margin-top: 30px; font-size: var(--fs-5); }
    .login-link a { display: inline; color: var(--blue-green-color-wheel); font-weight: var(--fw-600); }
    .login-link a:hover { text-decoration: underline; }

    /* Mobile Fix */
    @media (max-width: 992px) {
      .navbar { display: none; } 
      .header-right-group { margin-right: 60px; gap: 10px; }
      .lang-box { padding: 0 8px; min-width: auto; }
      .header .btn { padding: 0 15px !important; font-size: 0.9rem !important; }
      
      .dropdown-menu { position: static; transform: none; box-shadow: none; border: none; padding-left: 20px; background: #f9f9f9; display: none; opacity: 1; visibility: visible; }
      .dropdown-wrapper:hover .dropdown-menu { display: block; }
    }
  </style>
</head>

<body id="top">

  <header class="header" data-header>
    <div class="container">
      <a href="index.html" class="logo">कृषिMitr<span class="span">.</span></a>
      <nav class="navbar" data-navbar>
        <button class="nav-toggle-btn" aria-label="close menu" data-nav-toggler><ion-icon name="close-outline"></ion-icon></button>
        <ul class="navbar-list">
          <li class="navbar-item"><a href="index.html" class="navbar-link" data-nav-link>Home</a></li>
          <li class="navbar-item"><a href="news.html" class="navbar-link" data-nav-link>News</a></li>
          
          <li class="navbar-item dropdown-wrapper">
            <a href="#" class="navbar-link">
               Marketplace <ion-icon name="chevron-down-outline" style="font-size: 1rem;"></ion-icon>
            </a>
            <ul class="dropdown-menu">
                <li><a href="fertilizer-store.html" class="dropdown-item"><ion-icon name="storefront-outline"></ion-icon> Find Stores</a></li>
                <li><a href="mandi-prices.html" class="dropdown-item"><ion-icon name="bar-chart-outline"></ion-icon> Mandi Prices</a></li>
            </ul>
          </li>

          <li class="navbar-item"><a href="crop-guide.html" class="navbar-link" data-nav-link>Crop Guide</a></li>
          <li class="navbar-item"><a href="weather.html" class="navbar-link" data-nav-link>Weather</a></li>
          <li class="navbar-item"><a href="contact.html" class="navbar-link" data-nav-link>Contact</a></li>
        </ul>
      </nav>
      
      <div class="header-right-group">
        <div class="lang-box">
          <ion-icon name="language-outline"></ion-icon>
          <select id="language-select" onchange="changeLanguage(this.value)">
            <option value="en">English</option>
            <option value="hi">हिंदी</option>
          </select>
        </div>
        <a href="login.html" class="btn btn-primary" id="auth-button" data-i18n="btn_login">Login</a>
      </div>

      <button class="nav-toggle-btn" aria-label="open manu" data-nav-toggler><ion-icon name="menu-outline"></ion-icon></button>
      <div class="overlay" data-nav-toggler data-overlay></div>
    </div>
  </header>

  <main>
    <article>
      <section class="section login-section" aria-label="signup form" data-section>
        <div class="container">
          <div class="login-card">
            <h2 class="h2">Farmer Registration</h2>
            <p class="form-subtitle">Create your free Krishimitr account.</p>

            <form action="#" class="signup-form" id="signup-form">
              <div class="form-group">
                <label for="fullname">Full Name</label>
                <input type="text" name="fullname" id="fullname" placeholder="Enter your full name" required>
              </div>
              
              <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" name="email" id="email" placeholder="Enter your email address" required>
              </div>

              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" name="phone" id="phone" placeholder="Enter your 10-digit mobile number" required>
              </div>

              <div class="form-group">
                <label for="password">Create Password</label>
                <input type="password" name="password" id="password" placeholder="Create a strong password (min. 6 char)" required>
              </div>

              <hr class="form-divider">

              <div class="form-group">
                <label for="state">State</label>
                <select name="state" id="state" required>
                  <option value="" disabled selected>Select State</option>
                </select>
              </div>

              <div class="form-group">
                <label for="district">District / City</label>
                <select name="district" id="district" required>
                  <option value="" disabled selected>Select State First</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="pincode">Pincode</label>
                <input type="text" name="pincode" id="pincode" placeholder="e.g., 302022" maxlength="6" pattern="[0-9]{6}" required>
              </div>
              
              <div class="form-group">
                <label for="farmsize">Farm Size (in Acres)</label>
                <input type="number" name="farmsize" id="farmsize" placeholder="e.g., 5" required>
              </div>

              <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Create Account</button>

              <p class="login-link">Already have an account? <a href="login.html">Login here</a></p>
            </form>
          </div>
        </div>
      </section>
    </article>
  </main>

  <footer class="footer" id="footer">
    <div class="footer-bottom"><div class="container"><p class="copyright">&copy; 2025 Krishimitr. All Rights Reserved.</p></div></div>
  </footer>

  <a href="#top" class="back-top-btn" aria-label="back to top" data-back-top-btn><ion-icon name="chevron-up" aria-hidden="true"></ion-icon></a>

  <script src="./assets/js/script.js" defer></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script>
    // LIST OF INDIAN STATES & DISTRICTS
    const locationData = {
      "Andaman and Nicobar Islands": ["Nicobar", "North and Middle Andaman", "South Andaman"],
      "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Prakasam", "Srikakulam", "Sri Potti Sriramulu Nellore", "Visakhapatnam", "Vizianagaram", "West Godavari", "YSR Kadapa"],
      "Arunachal Pradesh": ["Tawang", "West Kameng", "East Kameng", "Papum Pare", "Kurung Kumey", "Kra Daadi", "Lower Subansiri", "Upper Subansiri", "West Siang", "East Siang", "Siang", "Upper Siang", "Lower Siang", "Lower Dibang Valley", "Dibang Valley", "Anjaw", "Lohit", "Namsai", "Changlang", "Tirap", "Longding"],
      "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Dima Hasao", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
      "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
      "Chandigarh": ["Chandigarh"],
      "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Janjgir-Champa", "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
      "Dadra and Nagar Haveli and Daman and Diu": ["Dadra and Nagar Haveli", "Daman", "Diu"],
      "Delhi": ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"],
      "Goa": ["North Goa", "South Goa"],
      "Gujarat": ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch", "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch", "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal", "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar", "Tapi", "Vadodara", "Valsad"],
      "Haryana": ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Nuh", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"],
      "Himachal Pradesh": ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"],
      "Jammu and Kashmir": ["Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal", "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama", "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"],
      "Jharkhand": ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahibganj", "Seraikela-Kharsawan", "Simdega", "West Singhbhum"],
      "Karnataka": ["Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban", "Bidar", "Chamarajanagar", "Chikkaballapur", "Chikkamagaluru", "Chitradurga", "Dakshina Kannada", "Davangere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi", "Uttara Kannada", "Vijayapura", "Yadgir"],
      "Kerala": ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"],
      "Ladakh": ["Kargil", "Leh"],
      "Lakshadweep": ["Lakshadweep"],
      "Madhya Pradesh": ["Agar Malwa", "Alirajpur", "Anuppur", "Ashoknagar", "Balaghat", "Barwani", "Betul", "Bhind", "Bhopal", "Burhanpur", "Chhatarpur", "Chhindwara", "Damoh", "Datia", "Dewas", "Dhar", "Dindori", "Guna", "Gwalior", "Harda", "Hoshangabad", "Indore", "Jabalpur", "Jhabua", "Katni", "Khandwa", "Khargone", "Mandla", "Mandsaur", "Morena", "Narsinghpur", "Neemuch", "Panna", "Raisen", "Rajgarh", "Ratlam", "Rewa", "Sagar", "Satna", "Sehore", "Seoni", "Shahdol", "Shajapur", "Sheopur", "Shivpuri", "Sidhi", "Singrauli", "Tikamgarh", "Ujjain", "Umaria", "Vidisha"],
      "Maharashtra": ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"],
      "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
      "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
      "Mizoram": ["Aizawl", "Champhai", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Serchhip"],
      "Nagaland": ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"],
      "Odisha": ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"],
      "Puducherry": ["Karaikal", "Mahe", "Puducherry", "Yanam"],
      "Punjab": ["Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib", "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar", "Kapurthala", "Ludhiana", "Mansa", "Moga", "Muktsar", "Nawanshahr", "Pathankot", "Patiala", "Rupnagar", "Sahibzada Ajit Singh Nagar", "Sangrur", "Tarn Taran"],
      "Rajasthan": ["Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara", "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur", "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore", "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur", "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar", "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"],
      "Sikkim": ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"],
      "Tamil Nadu": ["Ariyalur", "Chengalpattu", "Chennai", "Coimbatore", "Cuddalore", "Dharmapuri", "Dindigul", "Erode", "Kallakurichi", "Kanchipuram", "Kanyakumari", "Karur", "Krishnagiri", "Madurai", "Nagapattinam", "Namakkal", "Nilgiris", "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem", "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi", "Tiruchirappalli", "Tirunelveli", "Tirupathur", "Tiruppur", "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram", "Virudhunagar"],
      "Telangana": ["Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon", "Jayashankar Bhupalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar", "Khammam", "Kumuram Bheem", "Mahabubabad", "Mahabubnagar", "Mancherial", "Medak", "Medchal", "Nagarkurnool", "Nalgonda", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla", "Rangareddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad", "Wanaparthy", "Warangal (Rural)", "Warangal (Urban)", "Yadadri Bhuvanagiri"],
      "Tripura": ["Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala", "South Tripura", "Unakoti", "West Tripura"],
      "Uttar Pradesh": ["Agra", "Aligarh", "Ambedkar Nagar", "Amethi", "Amroha", "Auraiya", "Ayodhya", "Azamgarh", "Baghpat", "Bahraich", "Ballia", "Balrampur", "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor", "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah", "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddha Nagar", "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur", "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj", "Kanpur Dehat", "Kanpur Nagar", "Kasganj", "Kaushambi", "Kheri", "Kushinagar", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba", "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad", "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Raebareli", "Rampur", "Saharanpur", "Sambhal", "Sant Kabir Nagar", "Shahjahanpur", "Shamli", "Shravasti", "Siddharthnagar", "Sitapur", "Sonbhadra", "Sultanpur", "Unnao", "Varanasi"],
      "Uttarakhand": ["Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar", "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag", "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"],
      "West Bengal": ["Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur", "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong", "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas", "Paschim Bardhaman", "Paschim Medinipur", "Purba Bardhaman", "Purba Medinipur", "Purulia", "South 24 Parganas", "Uttar Dinajpur"]
    };

    const stateSelect = document.getElementById('state');
    const districtSelect = document.getElementById('district');

    window.onload = function() {
      // Sort states alphabetically
      const sortedStates = Object.keys(locationData).sort();
      for (let state of sortedStates) {
        let option = document.createElement('option');
        option.value = state;
        option.text = state;
        stateSelect.appendChild(option);
      }
    };

    stateSelect.addEventListener('change', function() {
      districtSelect.innerHTML = '<option value="" disabled selected>Select District</option>';
      const selectedState = this.value;
      const districts = locationData[selectedState];
      if (districts) {
        // Sort districts alphabetically
        districts.sort().forEach(function(district) {
          let option = document.createElement('option');
          option.value = district;
          option.text = district;
          districtSelect.appendChild(option);
        });
      }
    });

    const translations = {
      en: { nav_home: "Home", nav_news: "News", nav_store: "Store", nav_guide: "Crop Guide", nav_weather: "Weather", nav_contact: "Contact", btn_signup: "Sign Up", btn_logout: "Logout", btn_login: "Login" },
      hi: { nav_home: "होम", nav_news: "समाचार", nav_store: "दुकान", nav_guide: "फसल गाइड", nav_weather: "मौसम", nav_contact: "संपर्क", btn_signup: "साइन अप", btn_logout: "लॉग आउट", btn_login: "लॉग इन" }
    };
    function changeLanguage(lang) {
      const elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) el.textContent = translations[lang][key];
      });
    }
  </script>

  <script type="module">
    // 1. Import Auth & DB PRE-INITIALIZED from config
    import { auth, db } from "./assets/js/config.js"; 
    
    // 2. Import Functions Needed
    import { createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // --- SIGN UP LOGIC ---
    const signupForm = document.getElementById('signup-form');
    if (signupForm) {
      signupForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        
        // Disable button to prevent double-click
        const btn = signupForm.querySelector('button');
        btn.innerText = "Creating Account...";
        btn.disabled = true;

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        const farmData = {
          fullName: document.getElementById('fullname').value,
          phone: document.getElementById('phone').value,
          state: document.getElementById('state').value,
          district: document.getElementById('district').value,
          pincode: document.getElementById('pincode').value,
          farmSize: document.getElementById('farmsize').value,
          email: email
        };

        try {
          // 1. Create User in Auth
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;

          // 2. Save Profile in Firestore
          await setDoc(doc(db, "farmers", user.uid), farmData);

          alert('Account created successfully! Redirecting to Dashboard...');
          window.location.href = 'dashboard.html'; 

        } catch (error) {
          console.error('Signup Error:', error);
          let errorMessage = "Error: " + error.message;
          if (error.code === 'auth/email-already-in-use') errorMessage = 'Email already exists. Please login.';
          else if (error.code === 'auth/weak-password') errorMessage = 'Password should be at least 6 characters.';
          
          alert(errorMessage);
          btn.innerText = "Create Account";
          btn.disabled = false;
        }
      });
    }

    // --- HEADER BUTTON STATE ---
    const authButton = document.getElementById('auth-button');
    if (authButton) {
      onAuthStateChanged(auth, (user) => {
        const currentLang = document.getElementById('language-select').value;
        const dict = translations[currentLang];
        if (user) {
          authButton.textContent = dict.btn_logout;
          authButton.href = '#';
          authButton.classList.replace('btn-primary', 'btn-secondary');
          authButton.onclick = (e) => {
            e.preventDefault();
            signOut(auth).then(() => window.location.reload());
          };
        } else {
          authButton.textContent = dict.btn_login;
          authButton.href = 'login.html';
          authButton.classList.replace('btn-secondary', 'btn-primary');
        }
      });
    }
  </script>

</body>
</html>